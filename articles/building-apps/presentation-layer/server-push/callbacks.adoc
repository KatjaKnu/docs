---
title: Callbacks
description: How to use server push with callbacks.
order: 20
section-nav: badge-flow
---

= Callbacks [badge-flow]#Flow#

If you are building the user interface with Flow, you can use <<{articles}/building-apps/application-layer/background-jobs/interaction#callbacks-flow,callbacks>> to allow a background thread to update the user interface.

Whenever you implement a callback, you have remember that the callback is called by the background thread. This means that any updates to the user interface must happen inside a call to `UI.access()`. However, since you are using `Runnable` and `Consumer` callbacks, you can use `UI.accessLater()`.

For every callback, you should create a private method in your user interface that you can pass as a method reference to `UI.accessLater()`. For example, a method for handling successful completion could look like this:

[source,java]
----
private void onJobCompleted(String result) {
    Notification.show("Job completed: " + result);
}
----

Likewise, a method for handling errors could look like this:

[source,java]
----
private void onJobFailed(Exception error) {
    Notification.show("Job failed: " + error.getMessage());
}
----

For reporting progress, you can use a `<<{articles}/components/progress-bar#,ProgressBar>>`. If the background jobs reports the progress as a floating point value between 0.0 and 1.0, you can pass it directly to the `setValue` method of the progress bar.

With these methods in place, the method that starts the background job could look like this:

[source,java]
----
private void startJob() {
    var ui = UI.getCurrent();
    service.startBackgroundJob(
        ui.accessLater(this::onJobCompleted, null),
        ui.accessLater(progressBar::setValue, null),
        ui.accessLater(this::onJobFailed, null)
    );
}
----

You would then call the `startJob()` method when a user clicks a button, for instance.
